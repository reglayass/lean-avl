We first prove that rotations preserve keys.

\begin{lstlisting}
lemma rotate_right_keys (t : btree α) (k : nat) (x : bool) :
  bound k t ↔ bound k (rotate_right t) := ...
\end{lstlisting}

As done with proofs for ordering, lemmas about simple rotations preserving keys are constructed as well.

\begin{lstlisting}
lemma simple_right_keys (t : btree α) (k : nat) (x : bool) :
  bound k t ↔ bound k (simple_right t) := ...
  
lemma simple_left_keys (t : btree α) (k : nat) (x : bool) :
  bound k t ↔ bound k (simple_left t) := ...
\end{lstlisting}

The proofs were written to be bi-implications. If we just take the left side into account -- if a key is bound in a tree then it is still bound in a simple left rotation -- there is no guarantee that after a simple left rotation, the keys all remain the same -- the right side of the bi-implication.  

It was during the construction of these proofs where the problem with the definition of \lstinline{bound} was discovered. Previously, the definition for \lstinline{bound} was similar to that of \lstinline{lookup}, recursively searching the tree until the key was found.

This definition made it difficult to write the proofs needed. There would be an assumption that the key is bound in the same subtree after a rotation, which is not the case after a rotation. The definition was then changed to the one shown in Section \ref{sec:bst}, which made the proofs easier because then the definition did not take into account the placement of the key, just whether or not it exists. This fits better into the purpose of the proofs for rotation retaining keys -- we want to make sure that some key is still present in the tree after a rotation, and not that the key is present in the same area of the tree.